extends default

# der Befehl des Compilers
COMPILER = javac

# die verschiedenen Verzeichnisse anlegen
build: mkdir ${BINDIR}/generated
build: mkdir ${BINDIR}/classes

# die Argumente des Compilers
FLAGS = ${DEBUG ? "-g" : "-g:none"} -encoding ${ENCODING}
# das bin-Verzeichnis
FLAGS += -d "${BINDIR}"
# der classpath
FLAGS += -classpath "${BINDIR}:${LIBS}"
# der sourcepath
FLAGS += -sourcepath "${SOURCES}"
# das Verzeichnis fÃ¼r generiertes Zeugs
FLAGS += -s "${BINDIR}/generated"
# die Java-Version (Standart 1.8}
JAVAVERSION ?= 1.8
FLAGS += -target ${JAVAVERSION} -source ${JAVAVERSION}

# den Kompilierungsvorgang aufrufen
build: compile

# das Jar-Archiv packen
# zuerst das Manifest anlegen
MANIFEST ?= ${BINDIR}/Manifest.mf
absolute MANIFEST
manifest: echo "Manifest-Version: 1.0"     >"${MANIFEST}"
manifest: echo "Created-By: Game Builder" >>"${MANIFEST}"
build: manifest
# jetzt das Jar-Archiv bauen
JAR ?= ${BINDIR}/${NAME}-Java-${VERSION}.jar
absolute JAR
build: exec in "${BINDIR}/classes" jar cfm "${JAR}" "${MANIFEST}" *

# beim Hochladen nur das Jar-Archiv hochladen
deploy: upload "${JAR}"
